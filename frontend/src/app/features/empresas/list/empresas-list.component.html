<div class="page">
  <div class="toolbar">
    <h2>Empresas</h2>
    <div class="actions">
      <button class="btn btn-primary" (click)="onInsert()" *ngIf="isAdmin">Cadastrar</button>
    </div>
  </div>
  <div class="content" *ngIf="empresas; else loadingTpl">
    <table class="table">
      <thead>
        <tr>
          <th>Tipo</th>
          <th>Documento</th>
          <th>Razão Social</th>
          <th>Fantasia</th>
          <th class="col-acoes">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of empresas">
          <td>{{ (e.tipoPessoa || '').toUpperCase() || '-' }}</td>
          <td>{{ formatDocumento(e) }}</td>
          <td>{{e.nomeRazaoSocial}}</td>
          <td>{{e.nomeFantasia || '-'}}</td>
          <td class="acoes">
            <button class="icon-btn" title="Consultar" aria-label="Consultar" (click)="onView(e)">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10zm0-8a3 3 0 1 0 .001 6.001A3 3 0 0 0 12 9z"/>
              </svg>
            </button>
            <button class="icon-btn" title="Editar" aria-label="Editar" (click)="onEdit(e)" *ngIf="isAdmin">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zm2.92 2.33H5v-0.92l8.06-8.06.92.92L5.92 19.58zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/>
              </svg>
            </button>
            <button class="icon-btn danger" title="Excluir" aria-label="Excluir" (click)="onDelete(e)" *ngIf="isAdmin" [disabled]="false">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <path d="M6 7h12l-1 14H7L6 7zm9-3h-6l-1 1H5v2h14V5h-3l-1-1z"/>
              </svg>
            </button>
          </td>
        </tr>
  <tr *ngIf="empresas.length === 0"><td colspan="5">Nenhum registro</td></tr>
      </tbody>
    </table>
  </div>
  <ng-template #loadingTpl>Carregando...</ng-template>
</div>
