<header class="topbar">
  <button *ngIf="auth.isAuthenticated" class="hamburger" (click)="toggleMenu()" aria-label="Abrir menu">
    <span></span><span></span><span></span>
  </button>
  <a routerLink="/empresas" class="brand" aria-label="Início">
    <img src="/assets/logo.svg" alt="CEI" height="28" />
  </a>
  <span class="spacer"></span>
</header>

<div class="shell">
  <main class="content">
    <router-outlet></router-outlet>
  </main>
</div>

<!-- Drawer à esquerda -->
<div class="overlay" *ngIf="menuOpen" (click)="closeMenu()"></div>
<aside class="drawer left" [class.open]="menuOpen" (click)="$event.stopPropagation()">
  <nav class="drawer-menu" *ngIf="auth.isAuthenticated">
    <a routerLink="/home" routerLinkActive="active" (click)="closeMenu()" [routerLinkActiveOptions]="{ exact: true }">
      <span class="menu-icon" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 10.5L12 3l9 7.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5 10v9a1 1 0 001 1h12a1 1 0 001-1v-9" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 20v-6h6v6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
      Home
    </a>
    <a routerLink="/empresas" routerLinkActive="active" (click)="closeMenu()">
      <span class="menu-icon" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 21h18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <rect x="4" y="7" width="7" height="10" rx="1.2" stroke="currentColor" stroke-width="1.8"/>
          <rect x="13" y="3" width="7" height="14" rx="1.2" stroke="currentColor" stroke-width="1.8"/>
          <path d="M7.5 10h0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M7.5 13h0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M16.5 6h0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M16.5 9h0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M16.5 12h0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </span>
      Empresas
    </a>
    <a routerLink="/perfis" routerLinkActive="active" (click)="closeMenu()">
      <span class="menu-icon" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 12a5 5 0 100-10 5 5 0 000 10z" stroke="currentColor" stroke-width="1.8"/>
          <path d="M3 21c1.8-3.6 5.4-6 9-6s7.2 2.4 9 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
      </span>
      Perfis
    </a>
    <a routerLink="/usuarios" routerLinkActive="active" (click)="closeMenu()">
      <span class="menu-icon" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 11a4 4 0 100-8 4 4 0 000 8z" stroke="currentColor" stroke-width="1.8"/>
          <path d="M8 13a5 5 0 00-5 5v3" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M22 21v-3a5 5 0 00-5-5h-2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M10 12a3 3 0 100-6 3 3 0 000 6z" stroke="currentColor" stroke-width="1.8"/>
        </svg>
      </span>
      Usuários
    </a>
    <hr />
    <button class="btn-link danger" (click)="onLogout()">Sair</button>
  </nav>
</aside>

<!-- Global Snackbar -->
<app-snackbar-container></app-snackbar-container>
